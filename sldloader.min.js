var LEE={REVISION:'0.1'};LEE.SLDLoader=function(){var a};LEE.SLDLoader.prototype={constructor:LEE.SLDLoader,getColor:function(a){var b;switch(a){case 0:b='rgb(0,0,0)';break;case 1:b='rgb(255,0,0)';break;case 2:b='rgb(255,255,0)';break;case 3:b='rgb(0,255,0)';break;case 4:b='rgb(0,255,255)';break;case 5:b='rgb(0,0,255)';break;case 6:b='rgb(255,0,255)';break;case 7:b='rgb(255,255,255)';break;case 8:b='rgb(65,65,65 )';break;case 9:b='rgb(128,128,128)';break;case 10:b='rgb(255,0,0)';break;case 11:b='rgb(255,170,170)';break;case 12:b='rgb(189,0,0)';break;case 13:b='rgb(189,126,126)';break;case 14:b='rgb(129,0,0)';break;case 15:b='rgb(129,86,86 )';break;case 16:b='rgb(104,0,0)';break;case 17:b='rgb(104,69,69 )';break;case 18:b='rgb(79,0,0)';break;case 19:b='rgb(79,53,53 )';break;case 20:b='rgb(255,63,0)';break;case 21:b='rgb(255,191,170)';break;case 22:b='rgb(189,46,0)';break;case 23:b='rgb(189,141,126)';break;case 24:b='rgb(129,31,0)';break;case 25:b='rgb(129,96,86 )';break;case 26:b='rgb(104,25,0)';break;case 27:b='rgb(104,78,69 )';break;case 28:b='rgb(79,19,0)';break;case 29:b='rgb(79,59,53 )';break;case 30:b='rgb(255,127,0)';break;case 31:b='rgb(255,212,170)';break;case 32:b='rgb(189,94,0)';break;case 33:b='rgb(189,157,126)';break;case 34:b='rgb(129,64,0)';break;case 35:b='rgb(129,107,86 )';break;case 36:b='rgb(104,52,0)';break;case 37:b='rgb(104,86,69 )';break;case 38:b='rgb(79,39,0)';break;case 39:b='rgb(79,66,53 )';break;case 40:b='rgb(255,191,0)';break;case 41:b='rgb(255,234,170)';break;case 42:b='rgb(189,141,0)';break;case 43:b='rgb(189,173,126)';break;case 44:b='rgb(129,96,0)';break;case 45:b='rgb(129,118,86 )';break;case 46:b='rgb(104,78,0)';break;case 47:b='rgb(104,95,69 )';break;case 48:b='rgb(79,59,0)';break;case 49:b='rgb(79,73,53 )';break;case 50:b='rgb(255,255,0)';break;case 51:b='rgb(255,255,170)';break;case 52:b='rgb(189,189,0)';break;case 53:b='rgb(189,189,126)';break;case 54:b='rgb(129,129,0)';break;case 55:b='rgb(129,129,86 )';break;case 56:b='rgb(104,104,0)';break;case 57:b='rgb(104,104,69 )';break;case 58:b='rgb(79,79,0)';break;case 59:b='rgb(79,79,53 )';break;case 60:b='rgb(191,255,0)';break;case 61:b='rgb(234,255,170)';break;case 62:b='rgb(141,189,0)';break;case 63:b='rgb(173,189,126)';break;case 64:b='rgb(96,129,0)';break;case 65:b='rgb(118,129,86 )';break;case 66:b='rgb(78,104,0)';break;case 67:b='rgb(95,104,69 )';break;case 68:b='rgb(59,79,0)';break;case 69:b='rgb(73,79,53 )';break;case 70:b='rgb(127,255,0)';break;case 71:b='rgb(212,255,170)';break;case 72:b='rgb(94,189,0)';break;case 73:b='rgb(157,189,126)';break;case 74:b='rgb(64,129,0)';break;case 75:b='rgb(107,129,86 )';break;case 76:b='rgb(52,104,0)';break;case 77:b='rgb(86,104,69 )';break;case 78:b='rgb(39,79,0)';break;case 79:b='rgb(66,79,53 )';break;case 80:b='rgb(63,255,0)';break;case 81:b='rgb(191,255,170)';break;case 82:b='rgb(46,189,0)';break;case 83:b='rgb(141,189,126)';break;case 84:b='rgb(31,129,0)';break;case 85:b='rgb(96,129,86 )';break;case 86:b='rgb(25,104,0)';break;case 87:b='rgb(78,104,69 )';break;case 88:b='rgb(19,79,0)';break;case 89:b='rgb(59,79,53 )';break;case 90:b='rgb(0,255,0)';break;case 91:b='rgb(170,255,170)';break;case 92:b='rgb(0,189,0)';break;case 93:b='rgb(126,189,126)';break;case 94:b='rgb(0,129,0)';break;case 95:b='rgb(86,129,86 )';break;case 96:b='rgb(0,104,0)';break;case 97:b='rgb(69,104,69 )';break;case 98:b='rgb(0,79,0)';break;case 99:b='rgb(53,79,53 )';break;case 100:b='rgb(0,255,63 )';break;case 101:b='rgb(170,255,191)';break;case 102:b='rgb(0,189,46 )';break;case 103:b='rgb(126,189,141)';break;case 104:b='rgb(0,129,31 )';break;case 105:b='rgb(86,129,96 )';break;case 106:b='rgb(0,104,25 )';break;case 107:b='rgb(69,104,78 )';break;case 108:b='rgb(0,79,19 )';break;case 109:b='rgb(53,79,59 )';break;case 110:b='rgb(0,255,127)';break;case 111:b='rgb(170,255,212)';break;case 112:b='rgb(0,189,94 )';break;case 113:b='rgb(126,189,157)';break;case 114:b='rgb(0,129,64 )';break;case 115:b='rgb(86,129,107)';break;case 116:b='rgb(0,104,52 )';break;case 117:b='rgb(69,104,86 )';break;case 118:b='rgb(0,79,39 )';break;case 119:b='rgb(53,79,66 )';break;case 120:b='rgb(0,255,191)';break;case 121:b='rgb(170,255,234)';break;case 122:b='rgb(0,189,141)';break;case 123:b='rgb(126,189,173)';break;case 124:b='rgb(0,129,96 )';break;case 125:b='rgb(86,129,118)';break;case 126:b='rgb(0,104,78 )';break;case 127:b='rgb(69,104,95 )';break;case 128:b='rgb(0,79,59 )';break;case 129:b='rgb(53,79,73 )';break;case 130:b='rgb(0,255,255)';break;case 131:b='rgb(170,255,255)';break;case 132:b='rgb(0,189,189)';break;case 133:b='rgb(126,189,189)';break;case 134:b='rgb(0,129,129)';break;case 135:b='rgb(86,129,129)';break;case 136:b='rgb(0,104,104)';break;case 137:b='rgb(69,104,104)';break;case 138:b='rgb(0,79,79 )';break;case 139:b='rgb(53,79,79 )';break;case 140:b='rgb(0,191,255)';break;case 141:b='rgb(170,234,255)';break;case 142:b='rgb(0,141,189)';break;case 143:b='rgb(126,173,189)';break;case 144:b='rgb(0,96,129)';break;case 145:b='rgb(86,118,129)';break;case 146:b='rgb(0,78,104)';break;case 147:b='rgb(69,95,104)';break;case 148:b='rgb(0,59,79 )';break;case 149:b='rgb(53,73,79 )';break;case 150:b='rgb(0,127,255)';break;case 151:b='rgb(170,212,255)';break;case 152:b='rgb(0,94,189)';break;case 153:b='rgb(126,157,189)';break;case 154:b='rgb(0,64,129)';break;case 155:b='rgb(86,107,129)';break;case 156:b='rgb(0,52,104)';break;case 157:b='rgb(69,86,104)';break;case 158:b='rgb(0,39,79 )';break;case 159:b='rgb(53,66,79 )';break;case 160:b='rgb(0,63,255)';break;case 161:b='rgb(170,191,255)';break;case 162:b='rgb(0,46,189)';break;case 163:b='rgb(126,141,189)';break;case 164:b='rgb(0,31,129)';break;case 165:b='rgb(86,96,129)';break;case 166:b='rgb(0,25,104)';break;case 167:b='rgb(69,78,104)';break;case 168:b='rgb(0,19,79 )';break;case 169:b='rgb(53,59,79 )';break;case 170:b='rgb(0,0,255)';break;case 171:b='rgb(170,170,255)';break;case 172:b='rgb(0,0,189)';break;case 173:b='rgb(126,126,189)';break;case 174:b='rgb(0,0,129)';break;case 175:b='rgb(86,86,129)';break;case 176:b='rgb(0,0,104)';break;case 177:b='rgb(69,69,104)';break;case 178:b='rgb(0,0,79 )';break;case 179:b='rgb(53,53,79 )';break;case 180:b='rgb(63,0,255)';break;case 181:b='rgb(191,170,255)';break;case 182:b='rgb(46,0,189)';break;case 183:b='rgb(141,126,189)';break;case 184:b='rgb(31,0,129)';break;case 185:b='rgb(96,86,129)';break;case 186:b='rgb(25,0,104)';break;case 187:b='rgb(78,69,104)';break;case 188:b='rgb(19,0,79 )';break;case 189:b='rgb(59,53,79 )';break;case 190:b='rgb(127,0,255)';break;case 191:b='rgb(212,170,255)';break;case 192:b='rgb(94,0,189)';break;case 193:b='rgb(157,126,189)';break;case 194:b='rgb(64,0,129)';break;case 195:b='rgb(107,86,129)';break;case 196:b='rgb(52,0,104)';break;case 197:b='rgb(86,69,104)';break;case 198:b='rgb(39,0,79 )';break;case 199:b='rgb(66,53,79 )';break;case 200:b='rgb(191,0,255)';break;case 201:b='rgb(234,170,255)';break;case 202:b='rgb(141,0,189)';break;case 203:b='rgb(173,126,189)';break;case 204:b='rgb(96,0,129)';break;case 205:b='rgb(118,86,129)';break;case 206:b='rgb(78,0,104)';break;case 207:b='rgb(95,69,104)';break;case 208:b='rgb(59,0,79 )';break;case 209:b='rgb(73,53,79 )';break;case 210:b='rgb(255,0,255)';break;case 211:b='rgb(255,170,255)';break;case 212:b='rgb(189,0,189)';break;case 213:b='rgb(189,126,189)';break;case 214:b='rgb(129,0,129)';break;case 215:b='rgb(129,86,129)';break;case 216:b='rgb(104,0,104)';break;case 217:b='rgb(104,69,104)';break;case 218:b='rgb(79,0,79 )';break;case 219:b='rgb(79,53,79 )';break;case 220:b='rgb(255,0,191)';break;case 221:b='rgb(255,170,234)';break;case 222:b='rgb(189,0,141)';break;case 223:b='rgb(189,126,173)';break;case 224:b='rgb(129,0,96 )';break;case 225:b='rgb(129,86,118)';break;case 226:b='rgb(104,0,78 )';break;case 227:b='rgb(104,69,95 )';break;case 228:b='rgb(79,0,59 )';break;case 229:b='rgb(79,53,73 )';break;case 230:b='rgb(255,0,127)';break;case 231:b='rgb(255,170,212)';break;case 232:b='rgb(189,0,94 )';break;case 233:b='rgb(189,126,157)';break;case 234:b='rgb(129,0,64 )';break;case 235:b='rgb(129,86,107)';break;case 236:b='rgb(104,0,52 )';break;case 237:b='rgb(104,69,86 )';break;case 238:b='rgb(79,0,39 )';break;case 239:b='rgb(79,53,66 )';break;case 240:b='rgb(255,0,63 )';break;case 241:b='rgb(255,170,191)';break;case 242:b='rgb(189,0,46 )';break;case 243:b='rgb(189,126,141)';break;case 244:b='rgb(129,0,31 )';break;case 245:b='rgb(129,86,96 )';break;case 246:b='rgb(104,0,25 )';break;case 247:b='rgb(104,69,78 )';break;case 248:b='rgb(79,0,19 )';break;case 249:b='rgb(79,53,59 )';break;case 250:b='rgb(51,51,51 )';break;case 251:b='rgb(80,80,80 )';break;case 252:b='rgb(105,105,105)';break;case 253:b='rgb(130,130,130)';break;case 254:b='rgb(190,190,190)';break;case 255:b='rgb(255,255,255)';break;default:b=0x000000;break}return b},drawPolygon:function(a,b,c){this.context.beginPath();for(var i=0;i<c;i++){if(i===0)this.context.moveTo(a[i][0],a[i][1]);this.context.lineTo(a[i][0],a[i][1])}this.context.strokeStyle=this.getColor(b);this.context.stroke();this.context.closePath();this.context.fill()},drawVector:function(a,b,c,d,e){this.context.beginPath();this.context.moveTo(a,b);this.context.lineTo(c,d);this.context.lineTo(c,d+1);this.context.strokeStyle=this.getColor(e);this.context.stroke();this.context.closePath()},draw:function(d,e){var f=e.getContext('2d');this.context=f;var g="AutoCAD Slide",SLIDE_HEADER_LENGTH=31,SLIDE_OFFSET_VECTOR=-5,SLIDE_END_FILE=-4,SLIDE_SOLID_FILL=-3,SLIDE_END_VECTOR=-2,SLIDE_NEW_COLOR=-1;var h,bString,cmd,nverts;var k=0;var l=true;var m=0;var n={left:e.clientLeft,top:e.clientTop,right:e.clientWidth-e.clientLeft,bottom:e.clientHeight-e.clientTop,};f.clearRect(e.clientLeft,e.clientTop,e.clientWidth,e.clientHeight);var o=new Array(20);var p=new Array(2);var q=new Array(2);var r=new Array(3);for(var i=0;i<r.length;i++){r[i]=new Array(2);for(var j=0;j<2;j++){r[i][j]=new Array(2)}}var s=new Array(2);for(var i=0;i<s.length;i++){s[i]=new Array(3)}var t=new DataView(stringToArrayBuffer(d));var u=d.substr(0,SLIDE_HEADER_LENGTH);var v=u.substr(0,g.length);if(v!==g)return null;k=18;var w=t.getUint8(k);if(w<1||w>2)return null;var x=t.getUint16(29,true);if(x===4660)l=false;k=19;var y=(l)?t.getUint16(k,false):t.getUint16(k,true);k=21;var z=(l)?t.getUint16(k,false):t.getUint16(k,true);k=23;var A=t.getFloat32(k,true);r[0][0][0]=0;r[0][0][1]=0;r[0][1][0]=y;r[0][1][1]=z;r[1][0][0]=n.left;r[1][0][1]=n.bottom;r[1][1][0]=n.right;r[1][1][1]=n.top;q[0]=y/z;q[1]=n.right/n.bottom;if(q[1]>q[2]){fr1=(0.5*(1.0-q[0]/q[1])*(r[1][1][0]-r[1][0][0]));r[2][0][0]=r[1][0][0]+fr1;r[2][0][1]=r[1][0][1];r[2][1][0]=r[1][1][0]-fr1;r[2][1][1]=r[1][1][1]}else{fr1=(0.5*(1.0-q[1]/q[0])*(r[1][1][1]-r[1][0][1]));r[2][0][0]=r[1][0][0];r[2][0][1]=r[1][0][1]+fr1;r[2][1][0]=r[1][1][0];r[2][1][1]=r[1][1][1]-fr1}y=(r[2][1][0]-r[2][0][0])/(r[0][1][0]-r[0][0][0]);z=(r[2][1][1]-r[2][0][1])/(r[0][1][1]-r[0][0][1]);k=32;try{for(;k<d.length-2;k+=2){cmd=t.getInt8(l?k-1:k);switch(cmd){case SLIDE_OFFSET_VECTOR:o[0]=p[0]+t.getInt8(l?k:k-1);k+=1;o[1]=p[1]+t.getInt8(k);k+=1;o[2]=p[0]+t.getInt8(k);k+=1;o[3]=p[1]+t.getInt8(k);p[0]=o[0];p[1]=o[1];o[0]=(r[2][0][0])+y*(o[0]-r[0][0][0]);o[1]=(r[2][0][1])+z*(o[1]-r[0][0][1]);o[2]=(r[2][0][0])+y*(o[2]-r[0][0][0]);o[3]=(r[2][0][1])+z*(o[3]-r[0][0][1]);this.drawVector(o[0],o[1],o[2],o[3],m);break;case SLIDE_END_FILE:return;break;case SLIDE_SOLID_FILL:k+=2;nverts=t.getInt16(k-1,(l)?false:true);k+=2;tvalue=t.getInt16(k-1,(l)?false:true);if(nverts>1&&tvalue<0){var B=new Array(nverts);for(var i=0;i<B.length;i++){B[i]=new Array(2)}for(fi1=0;fi1<nverts;++fi1){k+=2;if(t.getInt8(l?k-1:k)!=SLIDE_SOLID_FILL)return null;k+=2;tvalue=t.getInt16(k-1,(l)?false:true);o[fi1*2+0]=tvalue;k+=2;tvalue=t.getInt16(k-1,(l)?false:true);o[fi1*2+1]=tvalue;if(o[fi1*2+1]<0){if(fi1!=nverts-1){return null}nverts--}o[fi1*2+0]=(r[2][0][0])+y*(o[fi1*2+0]-r[0][0][0]);o[fi1*2+1]=(r[2][0][1])+z*(o[fi1*2+1]-r[0][0][1]);B[fi1][0]=o[fi1*2+0];B[fi1][1]=o[fi1*2+1]}this.drawPolygon(B,m,nverts)}break;case SLIDE_END_VECTOR:k+=1;o[0]=p[0];o[1]=p[1];cvalue=t.getInt8(l?k:k-1);p[0]=o[2]=o[0]+cvalue;cvalue=t.getInt8(k+1);p[1]=o[3]=o[1]+cvalue;o[0]=(r[2][0][0])+y*(o[0]-r[0][0][0]);o[1]=(r[2][0][1])+z*(o[1]-r[0][0][1]);o[2]=(r[2][0][0])+y*(o[2]-r[0][0][0]);o[3]=(r[2][0][1])+z*(o[3]-r[0][0][1]);drawVector(o[0],o[1],o[2],o[3],m);k+=1;break;case SLIDE_NEW_COLOR:m=t.getInt8(l?k:k-1);if(m<0){m=256+m}if(m>255||m<0){m=7}break;default:if(t.getInt8(l?k-1:k)<0)return null;tvalue=t.getInt16(k-1,l?false:true);o[0]=tvalue;for(fi1=1;fi1<4;++fi1){k+=2;tvalue=t.getInt16(k-1,l?false:true);o[fi1]=tvalue}p[0]=o[0];p[1]=o[1];o[0]=(r[2][0][0])+y*(o[0]-r[0][0][0]);o[1]=(r[2][0][1])+z*(o[1]-r[0][0][1]);o[2]=(r[2][0][0])+y*(o[2]-r[0][0][0]);o[3]=(r[2][0][1])+z*(o[3]-r[0][0][1]);s[0][0]=o[0];s[0][1]=o[1];s[1][0]=o[2];s[1][1]=o[3];this.drawVector(o[0],o[1],o[2],o[3],m);break}}}catch(error){alert(error);return}function stringToArrayBuffer(a){var b=new ArrayBuffer(a.length);var c=new Uint8Array(b);for(var i=0,strLen=a.length;i<strLen;i++){c[i]=a.charCodeAt(i)}return b}}};
